CREATE TABLE "UNIVERSITIES" (
  "ID" serial PRIMARY KEY,
  "NAME" varchar UNIQUE,
  "CITY" int
);

CREATE TABLE "DEPARTMENTS" (
  "ID" serial PRIMARY KEY,
  "FACULTY" varchar,
  "NAME" varchar,
  unique ("FACULTY","NAME")
);

CREATE TABLE "STUDENTS" (
  "ID" serial PRIMARY KEY,
  "EMAIL" varchar UNIQUE,
  "PASSWORD" text,
  "NAME" varchar,
  "DEPARTMENT" int,
  "UNIVERSITY" int,
  "CITY" int,
  "EMP_PREF" varchar
);

CREATE TABLE "CITIES" (
  "ID" serial UNIQUE,
  "COUNTRY" varchar,
  "NAME" varchar,
  PRIMARY KEY ("COUNTRY", "NAME")
);

CREATE TABLE "STUDENT_SKILL" (
  "ID" serial,
  "STU_ID" int,
  "SKILL_ID" int,
  PRIMARY KEY ("STU_ID", "SKILL_ID")
);

CREATE TABLE "COMPANIES" (
  "ID" serial PRIMARY KEY,
  "EMAIL" varchar UNIQUE,
  "PASSWORD" text,
  "NAME" varchar UNIQUE,
  "CITY" int,
  "EXC_ID" int,
  "EXC_NAME" varchar,
  "EXC_DOB" date,
  "VERIFIED" boolean
);

CREATE TABLE "JOB_LISTINGS" (
  "ID" serial PRIMARY KEY,
  "COMPANY" int,
  "DESCRIPTION" varchar,
  "LOCATION" int
);

CREATE TABLE "JOB_REQ" (
  "ID" serial,
  "JOB_ID" int,
  "REQ_ID" int,
  PRIMARY KEY ("JOB_ID", "REQ_ID")
);

CREATE TABLE "SKILLS" (
  "ID" serial PRIMARY KEY,
  "NAME" varchar UNIQUE,
  "DESCRIPTION" varchar
);

CREATE TABLE "APPLICATIONS" (
  "JOB_ID" int,
  "STU_ID" int,
  "DIRECTION" boolean,
  "RESPONSE" boolean,
  PRIMARY KEY ("JOB_ID", "STU_ID")
);
ALTER TABLE "UNIVERSITIES" ADD FOREIGN KEY ("CITY") REFERENCES "CITIES" ("ID");

ALTER TABLE "STUDENTS" ADD FOREIGN KEY ("DEPARTMENT") REFERENCES "DEPARTMENTS" ("ID");

ALTER TABLE "STUDENTS" ADD FOREIGN KEY ("UNIVERSITY") REFERENCES "UNIVERSITIES" ("ID");

ALTER TABLE "STUDENTS" ADD FOREIGN KEY ("CITY") REFERENCES "CITIES" ("ID");

ALTER TABLE "STUDENT_SKILL" ADD FOREIGN KEY ("STU_ID") REFERENCES "STUDENTS" ("ID");

ALTER TABLE "STUDENT_SKILL" ADD FOREIGN KEY ("SKILL_ID") REFERENCES "SKILLS" ("ID");

ALTER TABLE "COMPANIES" ADD FOREIGN KEY ("CITY") REFERENCES "CITIES" ("ID");

ALTER TABLE "JOB_LISTINGS" ADD FOREIGN KEY ("COMPANY") REFERENCES "COMPANIES" ("ID");

ALTER TABLE "JOB_LISTINGS" ADD FOREIGN KEY ("LOCATION") REFERENCES "CITIES" ("ID");

ALTER TABLE "JOB_REQ" ADD FOREIGN KEY ("JOB_ID") REFERENCES "JOB_LISTINGS" ("ID");

ALTER TABLE "JOB_REQ" ADD FOREIGN KEY ("REQ_ID") REFERENCES "SKILLS" ("ID");

ALTER TABLE "APPLICATIONS" ADD FOREIGN KEY ("JOB_ID") REFERENCES "JOB_LISTINGS" ("ID");

ALTER TABLE "APPLICATIONS" ADD FOREIGN KEY ("STU_ID") REFERENCES "STUDENTS" ("ID");

